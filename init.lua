tc = {}

function tc.genCol(cStr)
	return "(tc_.png\\^[colorize\\:" .. cStr .. ")"
end

local function genImg(imgrows)
	local str = "[combine:" .. #imgrows[1] .. "x" .. #imgrows 
	--Set width and height
	
	for i = 1, #imgrows do
		for j = 1, #imgrows[i] do
			--Color pixels
			str = str .. ":"..(j-1)..","..(i-1).."="..tc.genCol(imgrows[i][j])
		end
	end
	return str
end

minetest.register_node('tc:test_node', {
	drawtype = "normal",
	tiles = {
		genImg({
			{"#000", "#000", "#000", "#000", "#555", "#555", "#555", "#555", "#999", "#999", "#999", "#999", "#CCC", "#CCC", "#CCC", "#CCC"},
			{"#555", "#555", "#555", "#555", "#999", "#999", "#999", "#999", "#CCC", "#CCC", "#CCC", "#CCC", "#000", "#000", "#000", "#000"},
			{"#999", "#999", "#999", "#999", "#CCC", "#CCC", "#CCC", "#CCC", "#000", "#000", "#000", "#000", "#555", "#555", "#555", "#555"},
			{"#CCC", "#CCC", "#CCC", "#CCC", "#000", "#000", "#000", "#000", "#555", "#555", "#555", "#555", "#999", "#999", "#999", "#999"},
		})
	},
	description = "Test Node"
})

minetest.register_node('tc:test_node_2', {
	drawtype = "normal",
	tiles = {
		genImg({{"#006800","#008400","#006c00","#005900","#008400","#007b00","#006300","#006800","#005900","#006c00","#005500","#007600","#006c00","#005900","#006800","#007100",},{"#006c00","#006c00","#006300","#007600","#006800","#007600","#006300","#006c00","#006300","#005500","#006800","#006c00","#006c00","#007600","#006800","#006300",},{"#007600","#005e00","#006c00","#006800","#006800","#007600","#007100","#006c00","#006c00","#006c00","#006c00","#007100","#007100","#008000","#006c00","#007100",},{"#006800","#007100","#006800","#006800","#008400","#006300","#006c00","#006800","#006c00","#006c00","#006800","#006800","#006c00","#006c00","#005900","#007b00",},{"#008000","#008000","#006800","#007b00","#007100","#006800","#006c00","#006800","#006c00","#006300","#006300","#006c00","#007600","#007600","#006c00","#006300",},{"#006300","#005e00","#007b00","#007100","#006800","#006c00","#006c00","#007b00","#008400","#007600","#007100","#007b00","#006800","#006300","#007600","#007600",},{"#006c00","#006300","#007100","#006800","#007100","#007600","#006c00","#009300","#007100","#007100","#006c00","#006c00","#006800","#006c00","#006800","#006800",},{"#006c00","#008900","#005e00","#006300","#006800","#006800","#007100","#005900","#007100","#006300","#006c00","#007100","#006c00","#007b00","#006800","#006c00",},{"#007600","#006c00","#006c00","#008000","#007600","#006800","#006c00","#007600","#007600","#005900","#006c00","#006800","#006800","#007100","#006c00","#006800",},{"#006c00","#005e00","#006c00","#008400","#007100","#007b00","#007100","#006300","#007100","#007100","#006800","#008000","#007b00","#007100","#006c00","#006800",},{"#006c00","#006c00","#005500","#007100","#006c00","#007600","#008400","#005e00","#006800","#006c00","#007600","#007b00","#007600","#006c00","#007600","#006c00",},{"#007100","#005e00","#007100","#007100","#007600","#007600","#006c00","#007b00","#006c00","#007100","#007600","#007100","#006300","#006300","#006c00","#006c00",},{"#008000","#005900","#006800","#006300","#007100","#006300","#006800","#006c00","#005e00","#007600","#006c00","#006c00","#006c00","#008000","#007600","#007b00",},{"#007600","#008400","#006c00","#006800","#006800","#008000","#006800","#006c00","#005500","#006300","#005e00","#006c00","#006c00","#007100","#006300","#006800",},{"#006300","#007100","#006c00","#007600","#006c00","#007b00","#005900","#007b00","#007100","#007100","#005900","#007100","#006c00","#006c00","#006c00","#007600",},{"#007b00","#007100","#007b00","#005e00","#006c00","#005e00","#007b00","#005e00","#007100","#007600","#006800","#005000","#006800","#007b00","#007100","#006c00",}})
	},
	description = "Test Node"
})